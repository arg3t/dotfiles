# Hyprland Configuration
# Based on Material Ocean color scheme

exec-once = "hyprlink"

# Application variables (replacing dwm's applications)
$terminal = alacritty
$menu = j4-dmenu-desktop
$browser = firefox

# Environment variables for Wayland
env = XCURSOR_SIZE,18
env = HYPRCURSOR_SIZE,18
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland
env = XDG_SESSION_DESKTOP,Hyprland

source = ~/.config/hypr/hyprcolor.conf

# General window management (replicating dwm behavior)
general {
    gaps_in = 5
    gaps_out = 5
    border_size = 1
    col.active_border = rgba(89b4faee) rgba(cba6f7ee) 45deg
    col.inactive_border = rgba(31324499)
    resize_on_border = false
    allow_tearing = false
    layout = master
}

decoration {
    rounding = 0
    active_opacity = 1.0
    inactive_opacity = 0.95

    # TODO: Check what this is
    blur {
        enabled = true
        size = 3
        passes = 1
        vibrancy = 0.1696
    }
}

animations {
    enabled = false
}

# dwm-style tiling layout
dwindle {
    pseudotile = true
    preserve_split = true
}

master {
    mfact = 0.55
}

# Input configuration
input {
    kb_layout = us,tr
    repeat_delay = 180
    repeat_rate = 40

    follow_mouse = 1
    sensitivity = 0

    kb_options = caps:escape

    touchpad {
        natural_scroll = false
    }
}

# Device-specific configs
device {
    name = epic-mouse-v1
    sensitivity = -0.5
}

$mainMod = SUPER

# Core window management (matching dwm keybinds)
bind = $mainMod, Return, exec, $terminal
bind = $mainMod, Q, killactive,

bind = $mainMod SHIFT, Q, exec, dmenu-logout
bind = $mainMod, X, exec, hyprlock
bind = $mainMod, D, exec, $menu
bind = $mainMod, T, exec, dmenu-toolkit
bind = $mainMod SHIFT, R, exec, dmenu-refresh
bind = $mainMod ALT, K, exec, kbmap_toggle


bind = $mainMod SHIFT, I, exec, screensaver_toggle -t
bind = $mainMod SHIFT, N, exec, dunst_toggle.sh -t


bind = $mainMod, f, fullscreen,
bind = $mainMod SHIFT, Space, togglefloating,

# Window focus (dwm-style j/k navigation
bind = $mainMod, J, cyclenext,
bind = $mainMod, K, cyclenext, prev

# Window manipulation
bind = $mainMod SHIFT, J, swapnext,
bind = $mainMod SHIFT, K, swapnext, prev
bind = $mainMod, H, resizeactive, -20 0
bind = $mainMod, L, resizeactive, 20 0
bind = $mainMod CTRL, J, resizeactive, 0 10
bind = $mainMod CTRL, K, resizeactive, 0 -10

# bind = $mainMod, T, exec, hyprctl keyword general:layout master
$switch_script = ~/.config/hypr/switch_workspace.sh

# Workspace management (dwm tags 1-9)
bind = $mainMod, 1, exec, $switch_script switch 1
bind = $mainMod, 2, exec, $switch_script switch 2
bind = $mainMod, 3, exec, $switch_script switch 3
bind = $mainMod, 4, exec, $switch_script switch 4
bind = $mainMod, 5, exec, $switch_script switch 5
bind = $mainMod, 6, exec, $switch_script switch 6
bind = $mainMod, 7, exec, $switch_script switch 7
bind = $mainMod, 8, exec, $switch_script switch 8
bind = $mainMod, 9, exec, $switch_script switch 9
bind = $mainMod, 0, exec, $switch_script switch 10

# Move windows to workspaces
bind = $mainMod SHIFT, 1, exec, $switch_script move 1
bind = $mainMod SHIFT, 2, exec, $switch_script move 2
bind = $mainMod SHIFT, 3, exec, $switch_script move 3
bind = $mainMod SHIFT, 4, exec, $switch_script move 4
bind = $mainMod SHIFT, 5, exec, $switch_script move 5
bind = $mainMod SHIFT, 6, exec, $switch_script move 6
bind = $mainMod SHIFT, 7, exec, $switch_script move 7
bind = $mainMod SHIFT, 8, exec, $switch_script move 8
bind = $mainMod SHIFT, 9, exec, $switch_script move 9
bind = $mainMod SHIFT, 0, exec, $switch_script move 10

# Move accross monitors
bind = $mainMod, period, focusmonitor, +1
bind = $mainMod, comma, focusmonitor, -1

bind = $mainMod SHIFT, period, movewindow, mon:+1
bind = $mainMod SHIFT, comma, movewindow, mon:-1

# Scratch Terminal Config
bind = $mainMod, S, exec, $switch_script togglespecial scratchterm
workspace = special:0_scratchterm, on-created-empty:alacritty --class 'scratchterm', persistent:false
workspace = special:1_scratchterm, on-created-empty:alacritty --class 'scratchterm', persistent:false
workspace = special:2_scratchterm, on-created-empty:alacritty --class 'scratchterm', persistent:false
workspace = special:3_scratchterm, on-created-empty:alacritty --class 'scratchterm', persistent:false
workspace = special:4_scratchterm, on-created-empty:alacritty --class 'scratchterm', persistent:false
windowrule = match:class ^(scratchterm)$, float on, size monitor_w*0.575 monitor_h*0.625, center on

# Declare all workspaces
workspace = 11, on-created-empty:alacritty
workspace = 1, on-created-empty:alacritty
workspace = 2, on-created-empty:firefox

# Nemo file manager
bind = $mainMod SHIFT, F, togglespecialworkspace, scratchfile
workspace = special:scratchfile, on-created-empty:/usr/bin/nemo --class=scratchfile --name=scratchfile, persistent:false
windowrule = match:class ^(scratchfile)$, float on, size monitor_w*0.575 monitor_h*0.625, workspace special:scratchfile

# clipboard
bind = $mainMod, C, exec, cliphist list | dmenu -l 8 | cliphist decode | wl-copy

# Mouse bindings
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# Media and utility keys
binde = , XF86AudioRaiseVolume, exec, ponymix -N increase 5%
binde = , XF86AudioLowerVolume, exec, ponymix -N decrease 5%
bindl = , XF86AudioMute, exec, ponymix -N toggle
bind = , PRINT, exec, XDG_CURRENT_DESKTOP=sway flameshot gui

windowrule = match:class ^(Alacritty)$, workspace m~0 silent

# Browser applications - Workspace 2
windowrule = match:class ^(Brave-browser)$, workspace m~2 silent
windowrule = match:class ^(firefox)$, workspace m~2 silent
windowrule = match:class ^(Firefox)$, workspace m~2 silent
windowrule = match:class ^(chromium)$, workspace m~2 silent
windowrule = match:class ^(Chromium)$, workspace m~2 silent
windowrule = match:class ^(tabbed-surf)$, workspace m~2 silent
windowrule = match:class ^(Tor Browser)$, workspace m~2 silent

# Communication apps - Workspace 9
windowrule = match:class ^(discord)$, workspace 9 silent
windowrule = match:class ^(Mattermost)$, workspace 9 silent
windowrule = match:class ^(Signal)$, workspace 9 silent
windowrule = match:class ^(TelegramDesktop)$, workspace 9 silent

# Email - Workspace 8
windowrule = match:class ^(thunderbird)$, workspace 8 silent

# Music/Media - Workspace 10
windowrule = match:class ^(spotify)$, workspace 10 silent
windowrule = match:class ^(Spotify)$, workspace 10 silent

# VirtualBox - Workspace 5
windowrule = match:class ^(VirtualBox Manager)$, workspace 15 silent
windowrule = match:class ^(VirtualBox Machine)$, workspace 15 silent

# Editors - Workspace 3
windowrule = match:class ^(neovide)$, workspace 13 silent
windowrule = match:class ^(Cursor)$, workspace 13 silent
windowrule = match:class ^(Code)$, workspace 13 silent
windowrule = match:class ^(dev.zed.Zed)$, workspace 13 silent

# Sticky windows (appear on all workspaces)
windowrule = match:class ^(Zathura)$, pin on
windowrule = match:class ^(stalonetray)$, pin on
windowrule = match:class ^(Qemu-system-x86_64)$, pin on, float on

# Obsidian on workspace 4
windowrule = match:class ^(obsidian)$, workspace 4 silent

# Reminders on all workspaces
windowrule = match:title ^(Reminder)$, pin on

# Flameshot
windowrule = match:class flameshot, match:title flameshot, move 0 0
windowrule = match:class flameshot, match:title flameshot, pin on
windowrule = match:class flameshot, match:title flameshot, fullscreen_state 3 3
windowrule = match:class flameshot, match:title flameshot, float on

# Firefox bitwarden extension
windowrule = match:class firefox, match:title .*Bitwarden.*, float on

# Include device-specific overrides
source = ~/.config/hypr/own/settings.conf
source = ~/.config/hypr/monitors.conf

# Autostart applications (replacing dwm autostart)
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = systemctl --user start hyprpolkitagent

exec-once = hyprpaper

exec-once = waybar
exec-once = mako
exec-once = wl-paste --type text --watch cliphist store

exec-once = systemctl --user start update-wallpaper.timer
exec-once = sleep 5; systemctl --user start update-wallpaper.service

exec-once = discord &
exec-once = thunderbird &

# Include device-specific overrides
source = ~/.config/hypr/own/exec.conf


debug {
  disable_logs = true
}
