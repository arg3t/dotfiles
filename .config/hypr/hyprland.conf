# Hyprland Configuration - arg3t dwm replica
# Based on Material Ocean color scheme

exec-once = "hyprlink"
exec-once = hyprpm reload -n

# Application variables (replacing dwm's applications)
$terminal = alacritty
$menu = j4-dmenu-desktop
$browser = firefox

# Environment variables for Wayland
env = XCURSOR_SIZE,18
env = HYPRCURSOR_SIZE,18
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland
env = XDG_SESSION_DESKTOP,Hyprland
env = QT_QPA_PLATFORM,wayland
env = GDK_BACKEND,wayland

# Catppuccin Mocha color scheme
$base = 0x1e1e2e
$mantle = 0x181825
$crust = 0x11111b
$surface0 = 0x313244
$surface1 = 0x45475a
$surface2 = 0x585b70
$text = 0xcdd6f4
$subtext0 = 0xa6adc8
$subtext1 = 0xbac2de
$blue = 0x89b4fa
$lavender = 0xb4befe
$sapphire = 0x74c7ec
$sky = 0x89dceb
$teal = 0x94e2d5
$green = 0xa6e3a1
$yellow = 0xf9e2af
$peach = 0xfab387
$maroon = 0xeba0ac
$red = 0xf38ba8
$mauve = 0xcba6f7
$pink = 0xf5c2e7
$flamingo = 0xf2cdcd
$rosewater = 0xf5e0dc

# General window management (replicating dwm behavior)
general {
    gaps_in = 5
    gaps_out = 5
    border_size = 1
    col.active_border = rgba(89b4faee) rgba(cba6f7ee) 45deg
    col.inactive_border = rgba(31324499)
    resize_on_border = false
    allow_tearing = false
    layout = master
}

plugin {
    split-monitor-workspaces {
        count = 10
        keep_focused = 1
        enable_notifications = 0
        enable_persistent_workspaces = 1
    }
}

decoration {
    rounding = 0
    active_opacity = 1.0
    inactive_opacity = 0.95

    # TODO: Check what this is
    blur {
        enabled = true
        size = 3
        passes = 1
        vibrancy = 0.1696
    }
}

animations {
    enabled = false
}

# dwm-style tiling layout
dwindle {
    pseudotile = true
    preserve_split = true
}

master {
    mfact = 0.55
}

# Input configuration
input {
    kb_layout = us,tr
    repeat_delay = 180
    repeat_rate = 40

    follow_mouse = 1
    sensitivity = 0

    kb_options = caps:escape

    touchpad {
        natural_scroll = false
    }
}

# Device-specific configs
device {
    name = epic-mouse-v1
    sensitivity = -0.5
}

$mainMod = SUPER

# Core window management (matching dwm keybinds)
bind = $mainMod, Return, exec, $terminal
bind = $mainMod, Q, killactive,

bind = $mainMod SHIFT, Q, exec, dmenu-logout
bind = $mainMod, X, exec, hyprlock
bind = $mainMod, D, exec, $menu
bind = $mainMod, T, exec, dmenu-toolkit
bind = $mainMod SHIFT, R, exec, dmenu-refresh
bind = $mainMod ALT, K, exec, kbmap_toggle


bind = $mainMod SHIFT, I, exec, screensaver_toggle -t
bind = $mainMod SHIFT, N, exec, dunst_toggle.sh -t


bind = $mainMod, f, fullscreen,
bind = $mainMod SHIFT, Space, togglefloating,

# Window focus (dwm-style j/k navigation
bind = $mainMod, J, cyclenext,
bind = $mainMod, K, cyclenext, prev

# Window manipulation
bind = $mainMod SHIFT, J, swapnext,
bind = $mainMod SHIFT, K, swapnext, prev
bind = $mainMod, H, resizeactive, -20 0
bind = $mainMod, L, resizeactive, 20 0
bind = $mainMod CTRL, J, resizeactive, 0 10
bind = $mainMod CTRL, K, resizeactive, 0 -10

# bind = $mainMod, T, exec, hyprctl keyword general:layout master

# Workspace management (dwm tags 1-9)
bind = $mainMod, 1, split-workspace, 1
bind = $mainMod, 2, split-workspace, 2
bind = $mainMod, 3, split-workspace, 3
bind = $mainMod, 4, split-workspace, 4
bind = $mainMod, 5, split-workspace, 5
bind = $mainMod, 6, split-workspace, 6
bind = $mainMod, 7, split-workspace, 7
bind = $mainMod, 8, split-workspace, 8
bind = $mainMod, 9, split-workspace, 9
bind = $mainMod, 0, split-workspace, 10

# Move windows to workspaces
bind = $mainMod SHIFT, 1, split-movetoworkspacesilent, 1
bind = $mainMod SHIFT, 2, split-movetoworkspacesilent, 2
bind = $mainMod SHIFT, 3, split-movetoworkspacesilent, 3
bind = $mainMod SHIFT, 4, split-movetoworkspacesilent, 4
bind = $mainMod SHIFT, 5, split-movetoworkspacesilent, 5
bind = $mainMod SHIFT, 6, split-movetoworkspacesilent, 6
bind = $mainMod SHIFT, 7, split-movetoworkspacesilent, 7
bind = $mainMod SHIFT, 8, split-movetoworkspacesilent, 8
bind = $mainMod SHIFT, 9, split-movetoworkspacesilent, 9
bind = $mainMod SHIFT, 0, split-movetoworkspacesilent, 10

# bind = $mainMod SHIFT, ., split-changemonitor, next

# Scratch Terminal Config
bind = $mainMod, S, togglespecialworkspace, scratchterm
workspace = special:scratchterm, on-created-empty:alacritty --class 'scratchterm', persistent:false
windowrulev2 = float, class:^(scratchterm)$
windowrulev2 = workspace special scratchterm, class:^(scratchterm)$
windowrulev2 = size 50% 50%, class:^(scratchterm)$

# Declare all workspaces
workspace = 11, on-created-empty:alacritty
workspace = 1, on-created-empty:alacritty
workspace = 2, on-created-empty:firefox

# Nemo file manager
bind = $mainMod SHIFT, F, togglespecialworkspace, scratchfile
workspace = special:scratchfile, on-created-empty:/usr/bin/nemo --class=scratchfile --name=scratchfile, persistent:false
windowrulev2 = float, class:^(scratchfile)$
windowrulev2 = workspace special scratchfile, class:^(scratchfile)$
windowrulev2 = size 50% 50%, class:^(scratchfile)$

# clipboard
bind = $mainMod, C, exec, cliphist list | dmenu -l 8 | cliphist decode | wl-copy

# Mouse bindings
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# Media and utility keys
binde = , XF86AudioRaiseVolume, exec, ponymix -N increase 5%
binde = , XF86AudioLowerVolume, exec, ponymix -N decrease 5%
bindl = , XF86AudioMute, exec, ponymix -N toggle
bind = , PRINT, exec, XDG_CURRENT_DESKTOP=sway flameshot gui

windowrulev2 = workspace m~0 silent,class:^(Alacritty)$

# Browser applications - Workspace 2
windowrulev2 = workspace m~2 silent, class:^(Brave-browser)$
windowrulev2 = workspace m~2 silent, class:^(firefox)$
windowrulev2 = workspace m~2 silent, class:^(Firefox)$
windowrulev2 = workspace m~2 silent, class:^(chromium)$
windowrulev2 = workspace m~2 silent, class:^(Chromium)$
windowrulev2 = workspace m~2 silent, class:^(tabbed-surf)$
windowrulev2 = workspace m~2 silent, class:^(Tor Browser)$

# Communication apps - Workspace 9
windowrulev2 = workspace 9 silent, class:^(discord)$
windowrulev2 = workspace 9 silent, class:^(Mattermost)$
windowrulev2 = workspace 9 silent, class:^(Signal)$
windowrulev2 = workspace 9 silent, class:^(TelegramDesktop)$

# Email - Workspace 8
windowrulev2 = workspace 8 silent, class:^(thunderbird)$

# Music/Media - Workspace 7
windowrulev2 = workspace 10 silent, class:^(spotify)$
windowrulev2 = workspace 10 silent, class:^(Spotify)$

# VirtualBox - Workspace 5
windowrulev2 = workspace 15 silent, class:^(VirtualBox Manager)$
windowrulev2 = workspace 15 silent, class:^(VirtualBox Machine)$

# Editors - Workspace 3
windowrulev2 = workspace 13 silent, class:^(neovide)$
windowrulev2 = workspace 13 silent, class:^(Cursor)$
windowrulev2 = workspace 13 silent, class:^(Code)$
windowrulev2 = workspace 13 silent, class:^(dev.zed.Zed)$

# Sticky windows (appear on all workspaces)
windowrulev2 = pin, class:^(Zathura)$
windowrulev2 = pin, class:^(stalonetray)$
windowrulev2 = pin, class:^(Qemu-system-x86_64)$
windowrulev2 = float, class:^(Qemu-system-x86_64)$

# Obsidian as scratchpad (special workspace)
windowrulev2 = workspace 4 silent, class:^(obsidian)$

# Reminders on all workspaces
windowrulev2 = pin, title:^(Reminder)$

# Flameshot
windowrulev2=move 0 0,class:(flameshot),title:(flameshot)
windowrulev2=pin,class:(flameshot),title:(flameshot)
windowrulev2=fullscreenstate,class:(flameshot),title:(flameshot)
windowrulev2=float,class:(flameshot),title:(flameshot)

# Include device-specific overrides
source = ~/.config/hypr/own/settings.conf

# Autostart applications (replacing dwm autostart)
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = systemctl --user start hyprpolkitagent

exec-once = hyprpaper

exec-once = waybar
exec-once = mako
exec-once = wl-paste --type text --watch cliphist store

exec-once = systemctl --user start update-wallpaper.timer
exec-once = sleep 5; systemctl --user start update-wallpaper.service

exec-once = discord &
exec-once = thunderbird &

# Include device-specific overrides
source = ~/.config/hypr/own/exec.conf


debug {
  disable_logs = true
}
